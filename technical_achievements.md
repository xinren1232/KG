# æŠ€æœ¯æˆæœä¸åˆ›æ–°äº®ç‚¹

## ğŸš€ æ ¸å¿ƒæŠ€æœ¯æˆæœ

### 1. å®Œæ•´çš„çŸ¥è¯†å›¾è°±æ„å»ºæµç¨‹

#### æ•°æ®å¤„ç†ç®¡é“
```
æ–‡æ¡£ä¸Šä¼  â†’ æ ¼å¼éªŒè¯ â†’ å†…å®¹è§£æ â†’ çŸ¥è¯†æŠ½å– â†’ å›¾è°±æ„å»º â†’ è´¨é‡æ²»ç†
```

#### æŠ€æœ¯å®ç°
- **æ–‡ä»¶å¤„ç†**: æ”¯æŒ5ç§ä¸»æµæ ¼å¼ (Excel, PDF, Word, CSV, TXT)
- **çŸ¥è¯†æŠ½å–**: å®ä½“è¯†åˆ« + å…³ç³»æŠ½å– + ç»“æ„åŒ–è¾“å‡º
- **å›¾è°±æ„å»º**: Neo4jå›¾æ•°æ®åº“ + å¯è§†åŒ–å±•ç¤º
- **æ•°æ®æ²»ç†**: è´¨é‡ç›‘æ§ + æ ‡å‡†åŒ–ç®¡ç†

### 2. é¢†åŸŸæœ¬ä½“è®¾è®¡ (Ontology v0.1)

#### å®ä½“æ¨¡å‹ (13ç§æ ¸å¿ƒå®ä½“)
```
Product (äº§å“) â†’ Build (ç‰ˆæœ¬) â†’ Component (ç»„ä»¶)
    â†“              â†“              â†“
TestCase (æµ‹è¯•ç”¨ä¾‹) â†’ TestStep (æµ‹è¯•æ­¥éª¤) â†’ TestResult (æµ‹è¯•ç»“æœ)
    â†“              â†“              â†“
Anomaly (å¼‚å¸¸) â†’ Symptom (ç—‡çŠ¶) â†’ RootCause (æ ¹å› ) â†’ Countermeasure (å¯¹ç­–)
    â†“              â†“              â†“
Owner (è´Ÿè´£äºº) â†’ Supplier (ä¾›åº”å•†) â†’ Doc (æ–‡æ¡£)
```

#### å…³ç³»æ¨¡å‹ (14ç§å…³ç³»ç±»å‹)
- **å±‚æ¬¡å…³ç³»**: HAS_BUILD, INCLUDES, BELONGS_TO
- **æµç¨‹å…³ç³»**: HAS_STEP, RESULT_OF, OBSERVED_IN
- **å› æœå…³ç³»**: AFFECTS, HAS_SYMPTOM, CAUSES, RESOLVED_BY
- **ç®¡ç†å…³ç³»**: DUPLICATE_OF, SUPPLIED_BY, OWNED_BY, DOCUMENTED_IN

### 3. æ ‡å‡†åŒ–è¯å…¸ä½“ç³»

#### ç»„ä»¶è¯å…¸ (25ä¸ªæ¡ç›®)
```csv
Component:Camera,æ‘„åƒå¤´,Hardware,"ç›¸æœº,Camera,é•œå¤´",ç”¨äºæ‹ç…§å’Œå½•åƒçš„ç¡¬ä»¶ç»„ä»¶
Component:Screen,å±å¹•,Hardware,"æ˜¾ç¤ºå±,Display,LCD",æ˜¾ç¤ºå›¾åƒå’Œç•Œé¢çš„ç¡¬ä»¶ç»„ä»¶
Component:Battery,ç”µæ± ,Hardware,"ç”µæº,Power,ç»­èˆª",æä¾›ç”µåŠ›çš„ç¡¬ä»¶ç»„ä»¶
...
```

#### ç—‡çŠ¶è¯å…¸ (35ä¸ªæ¡ç›®)
```csv
å¯¹ç„¦å¤±è´¥,åŠŸèƒ½å¼‚å¸¸,æ‘„åƒå¤´æ— æ³•æ­£ç¡®å¯¹ç„¦,S2
é»‘å±,æ˜¾ç¤ºå¼‚å¸¸,å±å¹•æ— æ˜¾ç¤ºæˆ–æ˜¾ç¤ºé»‘è‰²,S1
å‘çƒ­å¼‚å¸¸,æ€§èƒ½å¼‚å¸¸,è®¾å¤‡æ¸©åº¦è¿‡é«˜,S2
...
```

#### æ ¹å› è¯å…¸ (15ä¸ªæ¡ç›®)
```csv
ç¡¬ä»¶æ•…éšœ,ç¡¬ä»¶é—®é¢˜,ç¡¬ä»¶ç»„ä»¶æŸåæˆ–å¤±æ•ˆ,é«˜
è½¯ä»¶ç¼ºé™·,è½¯ä»¶é—®é¢˜,ç¨‹åºä»£ç å­˜åœ¨é”™è¯¯æˆ–æ¼æ´,é«˜
è®¾è®¡ç¼ºé™·,è®¾è®¡é—®é¢˜,äº§å“è®¾è®¡ä¸åˆç†æˆ–æœ‰ç¼ºé™·,ä¸­
...
```

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„åˆ›æ–°

### 1. å‰åç«¯åˆ†ç¦»æ¶æ„

#### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Vue3 + Composition API
- **UIåº“**: Element Plus
- **æ„å»º**: Vite
- **è·¯ç”±**: Vue Router 4
- **çŠ¶æ€**: å“åº”å¼æ•°æ®ç®¡ç†

#### åç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: FastAPI + Pydantic v2
- **æ•°æ®åº“**: Neo4j (å›¾æ•°æ®åº“)
- **æ–‡ä»¶å­˜å‚¨**: æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
- **APIæ–‡æ¡£**: Swagger/OpenAPI

### 2. æ¨¡å—åŒ–è®¾è®¡

#### æ ¸å¿ƒæ¨¡å—
```
ğŸ“ api/
â”œâ”€â”€ main_v01.py           # ä¸»APIæœåŠ¡
â”œâ”€â”€ etl/                  # ETLæ•°æ®å¤„ç†
â”‚   â”œâ”€â”€ parse_excel.py    # Excelè§£æ
â”‚   â”œâ”€â”€ normalizer.py     # æ•°æ®æ ‡å‡†åŒ–
â”‚   â””â”€â”€ upsert_writer.py  # æ•°æ®å†™å…¥
â””â”€â”€ queries/              # æŸ¥è¯¢æ¨¡æ¿

ğŸ“ apps/web/src/
â”œâ”€â”€ views/                # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Home.vue          # é¦–é¡µ
â”‚   â”œâ”€â”€ DocumentExtraction.vue  # æ–‡æ¡£è§£æ
â”‚   â”œâ”€â”€ Graph.vue         # çŸ¥è¯†å›¾è°±
â”‚   â”œâ”€â”€ DictionaryManagement.vue  # è¯å…¸ç®¡ç†
â”‚   â””â”€â”€ DataGovernance.vue  # æ•°æ®æ²»ç†
â”œâ”€â”€ router/               # è·¯ç”±é…ç½®
â””â”€â”€ components/           # å…¬å…±ç»„ä»¶

ğŸ“ ontology/
â”œâ”€â”€ ontology_v0.1.md      # æœ¬ä½“è®¾è®¡æ–‡æ¡£
â”œâ”€â”€ components.csv        # ç»„ä»¶è¯å…¸
â”œâ”€â”€ symptoms.csv          # ç—‡çŠ¶è¯å…¸
â””â”€â”€ causes.csv           # æ ¹å› è¯å…¸
```

### 3. APIè®¾è®¡è§„èŒƒ

#### RESTful APIç«¯ç‚¹
```
GET  /health              # å¥åº·æ£€æŸ¥
POST /kg/upload           # æ–‡ä»¶ä¸Šä¼ 
POST /kg/extract          # çŸ¥è¯†æŠ½å–
POST /kg/build            # å›¾è°±æ„å»º
GET  /kg/dictionary       # è¯å…¸æ•°æ®
GET  /kg/stats           # ç»Ÿè®¡ä¿¡æ¯
```

#### ç»Ÿä¸€å“åº”æ ¼å¼
```json
{
  "ok": true,
  "data": {
    "entities": [...],
    "relations": [...],
    "metadata": {...}
  },
  "error": null
}
```

## ğŸ’¡ æŠ€æœ¯åˆ›æ–°ç‚¹

### 1. å“åº”å¼å¯¼èˆªè®¾è®¡

#### å¤šè®¾å¤‡é€‚é…
```css
/* æ¡Œé¢ç«¯ (>1200px) */
.nav-menu { justify-content: flex-end; }

/* å¹³æ¿ç«¯ (768px-1200px) */
@media (max-width: 1200px) {
  .nav-menu .el-menu-item { padding: 0 15px; }
}

/* ç§»åŠ¨ç«¯ (<768px) */
@media (max-width: 768px) {
  .header-content { flex-direction: column; }
  .nav-menu { justify-content: center; }
}
```

### 2. æ™ºèƒ½æ–‡ä»¶å¤„ç†

#### å¤šæ ¼å¼æ”¯æŒ
```javascript
const allowedTypes = ['.xlsx', '.xls', '.pdf', '.docx', '.doc', '.csv', '.txt'];
const beforeUpload = (file) => {
  const isValidType = /\.(xlsx?|pdf|docx?|csv|txt)$/i.test(file.name);
  const isValidSize = file.size / 1024 / 1024 < 10;
  return isValidType && isValidSize;
};
```

#### å®æ—¶è¿›åº¦åé¦ˆ
```javascript
const uploadFile = async (file) => {
  const formData = new FormData();
  formData.append('file', file);
  
  const response = await fetch('/kg/upload', {
    method: 'POST',
    body: formData
  });
  
  return response.json();
};
```

### 3. æ•°æ®æ ‡å‡†åŒ–å¼•æ“

#### è¯å…¸æ˜ å°„ç®—æ³•
```python
class DataNormalizer:
    def normalize_component(self, component_name):
        # æ ‡å‡†åŒ–ç»„ä»¶åç§°
        for standard, aliases in self.component_mapping.items():
            if component_name in aliases:
                return standard
        return component_name
    
    def normalize_symptom(self, symptom_desc):
        # æ ‡å‡†åŒ–ç—‡çŠ¶æè¿°
        # ä½¿ç”¨æ¨¡ç³ŠåŒ¹é…å’Œå…³é”®è¯æå–
        pass
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–æˆæœ

### 1. APIå“åº”æ€§èƒ½
- **å¹³å‡å“åº”æ—¶é—´**: < 200ms
- **æ–‡ä»¶ä¸Šä¼ é€Ÿåº¦**: æ”¯æŒ10MBæ–‡ä»¶
- **å¹¶å‘å¤„ç†èƒ½åŠ›**: å¤šç”¨æˆ·åŒæ—¶è®¿é—®
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸æ•è·å’Œç”¨æˆ·æç¤º

### 2. å‰ç«¯æ€§èƒ½ä¼˜åŒ–
- **æ‡’åŠ è½½**: è·¯ç”±ç»„ä»¶æŒ‰éœ€åŠ è½½
- **å“åº”å¼è®¾è®¡**: è‡ªé€‚åº”ä¸åŒå±å¹•å°ºå¯¸
- **ç”¨æˆ·ä½“éªŒ**: å®æ—¶åé¦ˆå’Œè¿›åº¦æ˜¾ç¤º
- **é”™è¯¯å¤„ç†**: å‹å¥½çš„é”™è¯¯æç¤ºç•Œé¢

### 3. æ•°æ®å¤„ç†æ•ˆç‡
- **CSVè¯»å–**: å¿«é€Ÿè§£æè¯å…¸æ•°æ®
- **JSONåºåˆ—åŒ–**: é«˜æ•ˆçš„æ•°æ®æ ¼å¼è½¬æ¢
- **å†…å­˜ç®¡ç†**: ä¼˜åŒ–çš„æ•°æ®ç»“æ„è®¾è®¡
- **ç¼“å­˜æœºåˆ¶**: å‡å°‘é‡å¤è®¡ç®—

## ğŸ”§ å·¥ç¨‹åŒ–å®è·µ

### 1. ä»£ç è´¨é‡
- **ç±»å‹æ£€æŸ¥**: Pydanticæ¨¡å‹éªŒè¯
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- **æ—¥å¿—è®°å½•**: è¯¦ç»†çš„æ“ä½œæ—¥å¿—
- **APIæ–‡æ¡£**: è‡ªåŠ¨ç”Ÿæˆçš„æ¥å£æ–‡æ¡£

### 2. æµ‹è¯•éªŒè¯
- **åŠŸèƒ½æµ‹è¯•**: æ ¸å¿ƒåŠŸèƒ½éªŒè¯
- **æ€§èƒ½æµ‹è¯•**: å“åº”æ—¶é—´å’Œå¹¶å‘æµ‹è¯•
- **å…¼å®¹æ€§æµ‹è¯•**: å¤šæµè§ˆå™¨å’Œè®¾å¤‡æµ‹è¯•
- **ç”¨æˆ·ä½“éªŒæµ‹è¯•**: ç•Œé¢äº¤äº’å’Œæµç¨‹æµ‹è¯•

### 3. éƒ¨ç½²è¿ç»´
- **å®¹å™¨åŒ–**: Dockeræ”¯æŒ
- **ç¯å¢ƒé…ç½®**: .envç¯å¢ƒå˜é‡ç®¡ç†
- **æœåŠ¡ç›‘æ§**: å¥åº·æ£€æŸ¥å’ŒçŠ¶æ€ç›‘æ§
- **æ—¥å¿—ç®¡ç†**: ç»“æ„åŒ–æ—¥å¿—è¾“å‡º

## ğŸ¯ ä¸šåŠ¡ä»·å€¼

### 1. æ•ˆç‡æå‡
- **è‡ªåŠ¨åŒ–å¤„ç†**: å‡å°‘æ‰‹å·¥æ•°æ®æ•´ç†å·¥ä½œ
- **æ ‡å‡†åŒ–æµç¨‹**: ç»Ÿä¸€çš„æ•°æ®å¤„ç†è§„èŒƒ
- **å¿«é€Ÿæ£€ç´¢**: é«˜æ•ˆçš„çŸ¥è¯†æŸ¥æ‰¾å’Œåˆ†æ
- **å¯è§†åŒ–å±•ç¤º**: ç›´è§‚çš„å›¾è°±å±•ç¤ºç•Œé¢

### 2. è´¨é‡æ”¹è¿›
- **æ•°æ®æ ‡å‡†åŒ–**: ç»Ÿä¸€çš„è¯å…¸å’Œæœ¬ä½“
- **è´¨é‡ç›‘æ§**: å®æ—¶çš„æ•°æ®è´¨é‡æŒ‡æ ‡
- **çŸ¥è¯†æ²‰æ·€**: ç»“æ„åŒ–çš„çŸ¥è¯†èµ„äº§
- **ç»éªŒå¤ç”¨**: å¯é‡å¤çš„å¤„ç†æµç¨‹

### 3. å†³ç­–æ”¯æŒ
- **æ•°æ®æ´å¯Ÿ**: æ·±å…¥çš„å…³ç³»åˆ†æ
- **è¶‹åŠ¿åˆ†æ**: å†å²æ•°æ®çš„æ¨¡å¼è¯†åˆ«
- **é£é™©é¢„è­¦**: æ½œåœ¨é—®é¢˜çš„æ—©æœŸå‘ç°
- **ä¼˜åŒ–å»ºè®®**: åŸºäºæ•°æ®çš„æ”¹è¿›æ–¹æ¡ˆ

---

**æŠ€æœ¯æˆæœæ€»ç»“**: æ„å»ºäº†å®Œæ•´çš„çŸ¥è¯†å›¾è°±æŠ€æœ¯æ ˆï¼Œå®ç°äº†ä»æ–‡æ¡£åˆ°çŸ¥è¯†çš„è‡ªåŠ¨åŒ–è½¬æ¢ï¼Œä¸ºæ‰‹æœºç ”å‘è´¨é‡ç®¡ç†æä¾›äº†å¼ºæœ‰åŠ›çš„æŠ€æœ¯æ”¯æ’‘ã€‚
