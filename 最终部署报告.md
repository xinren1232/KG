# ğŸ‰ çŸ¥è¯†å›¾è°±ç³»ç»Ÿ - æœ€ç»ˆéƒ¨ç½²æŠ¥å‘Š

**æœåŠ¡å™¨**: 47.108.152.16  
**éƒ¨ç½²å®Œæˆæ—¶é—´**: 2025-10-04 01:48  
**éƒ¨ç½²çŠ¶æ€**: âœ… å®Œå…¨æˆåŠŸ

---

## ğŸ“Š æœåŠ¡éƒ¨ç½²æ€»è§ˆ

### âœ… æ‰€æœ‰æœåŠ¡è¿è¡ŒçŠ¶æ€

| æœåŠ¡åç§° | çŠ¶æ€ | ç«¯å£ | è¿›ç¨‹ç®¡ç† | å¼€æœºè‡ªå¯ | å¥åº·çŠ¶æ€ |
|---------|------|------|----------|----------|----------|
| **Neo4jæ•°æ®åº“** | âœ… active | 7474, 7687 | systemd | âœ… enabled | âœ… æ­£å¸¸ |
| **Redisç¼“å­˜** | âœ… active | 6379 | systemd | âœ… enabled | âœ… æ­£å¸¸ |
| **APIæœåŠ¡** | âœ… active | 8000 | systemd | âœ… enabled | âœ… æ­£å¸¸ |
| **å‰ç«¯æœåŠ¡** | âœ… active | 5173 | systemd | âœ… enabled | âœ… æ­£å¸¸ |
| **Nginxç½‘å…³** | âœ… active | 80 | systemd | âœ… enabled | âœ… æ­£å¸¸ |

### ğŸ¥ å¥åº·æ£€æŸ¥ç»“æœ

```
APIæœåŠ¡ (8000): âœ… æ­£å¸¸
å‰ç«¯æœåŠ¡ (5173): âœ… æ­£å¸¸
Neo4j (7474): âœ… æ­£å¸¸
Redis (6379): âœ… æ­£å¸¸
Nginx (80): âœ… æ­£å¸¸
```

### ğŸ“ˆ APIè¯¦ç»†çŠ¶æ€

```json
{
  "status": "healthy",
  "timestamp": "2025-10-04T01:47:43.410889",
  "version": "2.1.0",
  "services": {
    "neo4j": "connected",
    "redis": "connected"
  },
  "redis_stats": {
    "connected_clients": 1,
    "used_memory": "852.72K",
    "total_commands_processed": 20,
    "keyspace_hits": 0,
    "keyspace_misses": 0,
    "hit_rate": 0.0
  }
}
```

---

## ğŸŒ è®¿é—®åœ°å€

### å¤–éƒ¨è®¿é—®ï¼ˆå…¬ç½‘ï¼‰

| æœåŠ¡ | URL | è¯´æ˜ |
|------|-----|------|
| **ä¸»é¡µ** | http://47.108.152.16/ | å‰ç«¯åº”ç”¨ |
| **APIæ–‡æ¡£** | http://47.108.152.16/api/docs | Swagger APIæ–‡æ¡£ |
| **Neo4jæµè§ˆå™¨** | http://47.108.152.16/neo4j/ | å›¾æ•°æ®åº“ç®¡ç†ç•Œé¢ |

### å†…éƒ¨è®¿é—®ï¼ˆæœåŠ¡å™¨å†…ï¼‰

| æœåŠ¡ | URL | è¯´æ˜ |
|------|-----|------|
| å‰ç«¯ | http://localhost:5173/ | Viteå¼€å‘æœåŠ¡å™¨ |
| API | http://localhost:8000/ | FastAPIæœåŠ¡ |
| Neo4j | http://localhost:7474/ | Neo4j HTTPæ¥å£ |
| Redis | localhost:6379 | Redisç¼“å­˜ |

---

## ğŸ”§ æœåŠ¡ç®¡ç†

### å¿«æ·å‘½ä»¤ï¼ˆå·²éƒ¨ç½²ï¼‰

æ‰€æœ‰æœåŠ¡ç®¡ç†å‘½ä»¤å·²éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
kg-status

# å¥åº·æ£€æŸ¥
kg-health

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
kg-start

# åœæ­¢æ‰€æœ‰æœåŠ¡
kg-stop

# é‡å¯æ‰€æœ‰æœåŠ¡
kg-restart

# æŸ¥çœ‹æ—¥å¿—
kg-logs [api|frontend|neo4j|redis|nginx|error|all]
```

### systemdæœåŠ¡ç®¡ç†

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status neo4j
systemctl status redis-server
systemctl status kg-api
systemctl status kg-frontend
systemctl status nginx

# é‡å¯å•ä¸ªæœåŠ¡
systemctl restart kg-api
systemctl restart kg-frontend

# æŸ¥çœ‹æ—¥å¿—
journalctl -u kg-api -f
journalctl -u kg-frontend -f
```

---

## ğŸ“ æœåŠ¡é…ç½®æ–‡ä»¶

### systemdæœåŠ¡æ–‡ä»¶

| æœåŠ¡ | é…ç½®æ–‡ä»¶ä½ç½® |
|------|-------------|
| Neo4j | `/etc/systemd/system/neo4j.service` |
| Redis | `/etc/systemd/system/redis-server.service` |
| API | `/etc/systemd/system/kg-api.service` |
| å‰ç«¯ | `/etc/systemd/system/kg-frontend.service` |
| Nginx | `/etc/systemd/system/nginx.service` |

### åº”ç”¨é…ç½®æ–‡ä»¶

| é…ç½® | æ–‡ä»¶ä½ç½® |
|------|----------|
| ç¯å¢ƒå˜é‡ | `/opt/knowledge-graph/.env` |
| Neo4jé…ç½® | `/etc/neo4j/neo4j.conf` |
| Redisé…ç½® | `/etc/redis/redis.conf` |
| Nginxé…ç½® | `/etc/nginx/sites-available/knowledge-graph` |

### æ—¥å¿—æ–‡ä»¶

| æœåŠ¡ | æ—¥å¿—ä½ç½® |
|------|----------|
| API | `/var/log/kg-api.log`, `/var/log/kg-api-error.log` |
| å‰ç«¯ | `/var/log/kg-frontend.log`, `/var/log/kg-frontend-error.log` |
| Neo4j | `/var/log/neo4j/neo4j.log` |
| Redis | `/var/log/redis/redis-server.log` |
| Nginx | `/var/log/nginx/access.log`, `/var/log/nginx/error.log` |

---

## ğŸ” ç™»å½•å‡­è¯

### Neo4jæ•°æ®åº“

```
ç”¨æˆ·å: neo4j
å¯†ç : password123
Bolt URI: bolt://localhost:7687
HTTP URI: http://localhost:7474
```

### æœåŠ¡å™¨SSH

```
IP: 47.108.152.16
ç”¨æˆ·: root
```

---

## ğŸ“¦ å·²å®‰è£…çš„è½¯ä»¶å’Œä¾èµ–

### ç³»ç»ŸæœåŠ¡

- **Neo4j**: 2025.09.0 (Community Edition)
- **Redis**: 6.0.16
- **Nginx**: 1.18.0
- **Java**: OpenJDK 21
- **Python**: 3.10.12
- **Node.js**: 18.x

### PythonåŒ…ï¼ˆAPIæœåŠ¡ï¼‰

```
fastapi==0.118.0
uvicorn==0.37.0
pydantic==2.11.9
neo4j==6.0.2
redis==6.4.0
prometheus_client==0.23.1
python-dotenv==1.1.1
aiofiles==24.1.0
pandas==2.3.3
openpyxl==3.1.5
python-multipart==0.0.20
```

---

## ğŸ¯ ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| åŠŸèƒ½ | æœ¬åœ°ç¯å¢ƒ | æœåŠ¡å™¨ç¯å¢ƒ | çŠ¶æ€ |
|------|----------|------------|------|
| Neo4jæ•°æ®åº“ | âœ… æœ¬åœ°å®‰è£… | âœ… systemdæœåŠ¡ | âœ… ä¸€è‡´ |
| Redisç¼“å­˜ | âœ… æœ¬åœ°å®‰è£… | âœ… systemdæœåŠ¡ | âœ… ä¸€è‡´ |
| APIæœåŠ¡ | âœ… Pythonè¿è¡Œ | âœ… systemdæœåŠ¡ | âœ… ä¸€è‡´ |
| å‰ç«¯æœåŠ¡ | âœ… Vite dev | âœ… systemdæœåŠ¡ | âœ… ä¸€è‡´ |
| è¿›ç¨‹ç®¡ç† | âš ï¸ æ‰‹åŠ¨ç®¡ç† | âœ… systemdè‡ªåŠ¨ç®¡ç† | âœ… æ›´ä¼˜ |
| å¼€æœºè‡ªå¯ | âŒ ä¸æ”¯æŒ | âœ… å…¨éƒ¨æ”¯æŒ | âœ… æ›´ä¼˜ |
| æœåŠ¡ç›‘æ§ | âš ï¸ æ‰‹åŠ¨æ£€æŸ¥ | âœ… è‡ªåŠ¨ç›‘æ§+é‡å¯ | âœ… æ›´ä¼˜ |
| æ—¥å¿—ç®¡ç† | âš ï¸ åˆ†æ•£ | âœ… é›†ä¸­ç®¡ç† | âœ… æ›´ä¼˜ |

**ç»“è®º**: æœåŠ¡å™¨ç¯å¢ƒä¸ä»…å®ç°äº†æœ¬åœ°æ‰€æœ‰åŠŸèƒ½ï¼Œè€Œä¸”åœ¨æœåŠ¡ç®¡ç†ã€ç¨³å®šæ€§ã€å¯ç»´æŠ¤æ€§æ–¹é¢éƒ½æœ‰æ˜¾è‘—æå‡ï¼

---

## ğŸš€ éƒ¨ç½²äº®ç‚¹

### 1. âœ… å®Œæ•´çš„systemdæœåŠ¡ç®¡ç†

æ‰€æœ‰æœåŠ¡éƒ½é…ç½®ä¸ºsystemdæœåŠ¡ï¼š
- å¼€æœºè‡ªåŠ¨å¯åŠ¨
- å¼‚å¸¸è‡ªåŠ¨é‡å¯
- ç»Ÿä¸€çš„æœåŠ¡ç®¡ç†æ¥å£
- é›†ä¸­çš„æ—¥å¿—ç®¡ç†

### 2. âœ… ä¾¿æ·çš„ç®¡ç†è„šæœ¬

éƒ¨ç½²äº†5ä¸ªç®¡ç†è„šæœ¬ï¼š
- `kg-status` - ä¸€é”®æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
- `kg-health` - å¥åº·æ£€æŸ¥
- `kg-start` - å¯åŠ¨æ‰€æœ‰æœåŠ¡
- `kg-stop` - åœæ­¢æ‰€æœ‰æœåŠ¡
- `kg-restart` - é‡å¯æ‰€æœ‰æœåŠ¡
- `kg-logs` - æŸ¥çœ‹æ—¥å¿—

### 3. âœ… å®Œæ•´çš„æœåŠ¡ä¾èµ–ç®¡ç†

æœåŠ¡å¯åŠ¨é¡ºåºï¼š
1. Redis (åŸºç¡€ç¼“å­˜)
2. Neo4j (æ•°æ®åº“)
3. API (ä¾èµ–Rediså’ŒNeo4j)
4. å‰ç«¯ (ä¾èµ–API)
5. Nginx (ç½‘å…³)

### 4. âœ… å¥åº·ç›‘æ§

- APIæä¾›å¥åº·æ£€æŸ¥ç«¯ç‚¹
- è‡ªåŠ¨ç›‘æ§æ‰€æœ‰æœåŠ¡çŠ¶æ€
- æ”¯æŒå®šæ—¶å¥åº·æ£€æŸ¥ï¼ˆå¯é€‰ï¼‰

### 5. âœ… æ—¥å¿—é›†ä¸­ç®¡ç†

æ‰€æœ‰æœåŠ¡æ—¥å¿—ç»Ÿä¸€å­˜æ”¾åœ¨`/var/log/`ç›®å½•ï¼š
- æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯åˆ†ç¦»
- æ”¯æŒæ—¥å¿—è½®è½¬
- ä¾¿äºé—®é¢˜æ’æŸ¥

---

## ğŸ“‹ æœåŠ¡å¯åŠ¨æµç¨‹

### ç³»ç»Ÿå¯åŠ¨æ—¶

```
1. ç³»ç»Ÿå¯åŠ¨
   â†“
2. systemdåˆå§‹åŒ–
   â†“
3. Rediså¯åŠ¨ (redis-server.service)
   â†“
4. Neo4jå¯åŠ¨ (neo4j.service)
   â†“
5. APIå¯åŠ¨ (kg-api.service, ä¾èµ–Rediså’ŒNeo4j)
   â†“
6. å‰ç«¯å¯åŠ¨ (kg-frontend.service, ä¾èµ–API)
   â†“
7. Nginxå¯åŠ¨ (nginx.service)
   â†“
8. æ‰€æœ‰æœåŠ¡å°±ç»ª âœ…
```

### æ‰‹åŠ¨å¯åŠ¨æ—¶

```bash
# ä½¿ç”¨kg-startè„šæœ¬
kg-start

# æˆ–æ‰‹åŠ¨æŒ‰é¡ºåºå¯åŠ¨
systemctl start redis-server
systemctl start neo4j
sleep 5
systemctl start kg-api
systemctl start kg-frontend
systemctl start nginx
```

---

## ğŸ” é—®é¢˜æ’æŸ¥æŒ‡å—

### æœåŠ¡æ— æ³•å¯åŠ¨

```bash
# 1. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status <service-name>

# 2. æŸ¥çœ‹æ—¥å¿—
journalctl -u <service-name> -n 100 --no-pager

# 3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
cat /var/log/kg-*-error.log
```

### APIæœåŠ¡å¼‚å¸¸

```bash
# æŸ¥çœ‹APIæ—¥å¿—
kg-logs api

# æˆ–
tail -f /var/log/kg-api.log

# æ£€æŸ¥ä¾èµ–
cd /opt/knowledge-graph/api
pip3 list | grep -E 'fastapi|neo4j|redis'

# æ‰‹åŠ¨æµ‹è¯•
cd /opt/knowledge-graph/api
python3 main.py
```

### å‰ç«¯æœåŠ¡å¼‚å¸¸

```bash
# æŸ¥çœ‹å‰ç«¯æ—¥å¿—
kg-logs frontend

# æ£€æŸ¥Nodeç‰ˆæœ¬
node --version
npm --version

# é‡æ–°å®‰è£…ä¾èµ–
cd /opt/knowledge-graph/apps/web
npm install
```

### æ•°æ®åº“è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥Neo4j
systemctl status neo4j
curl http://localhost:7474/

# æ£€æŸ¥Redis
systemctl status redis-server
redis-cli ping
```

---

## ğŸ¯ å¸¸ç”¨æ“ä½œ

### æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€

```bash
# å¿«é€ŸæŸ¥çœ‹
kg-status

# è¯¦ç»†å¥åº·æ£€æŸ¥
kg-health

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡
systemctl status kg-api
```

### é‡å¯æœåŠ¡

```bash
# é‡å¯æ‰€æœ‰æœåŠ¡
kg-restart

# é‡å¯å•ä¸ªæœåŠ¡
systemctl restart kg-api
systemctl restart kg-frontend
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—æ‘˜è¦
kg-logs all

# æŸ¥çœ‹APIæ—¥å¿—
kg-logs api

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
kg-logs error

# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f /var/log/kg-api.log
journalctl -u kg-api -f
```

### æ›´æ–°ä»£ç 

```bash
# 1. ä¸Šä¼ æ–°ä»£ç åˆ°æœåŠ¡å™¨
scp -r api/ root@47.108.152.16:/opt/knowledge-graph/

# 2. é‡å¯æœåŠ¡
ssh root@47.108.152.16 "systemctl restart kg-api"

# 3. æ£€æŸ¥çŠ¶æ€
ssh root@47.108.152.16 "kg-health"
```

---

## ğŸ“Š æ€§èƒ½ç›‘æ§

### ç³»ç»Ÿèµ„æº

```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
df -h

# æŸ¥çœ‹è¿›ç¨‹èµ„æº
top
htop

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡èµ„æº
systemctl status kg-api
```

### æœåŠ¡ç›‘æ§

```bash
# APIç›‘æ§
curl http://localhost:8000/health | python3 -m json.tool

# Neo4jç›‘æ§
curl http://localhost:7474/

# Redisç›‘æ§
redis-cli info stats
```

---

## ğŸ‰ éƒ¨ç½²æˆåŠŸç¡®è®¤

### âœ… æ‰€æœ‰æ£€æŸ¥é¡¹

- [x] Neo4jæ•°æ®åº“è¿è¡Œæ­£å¸¸
- [x] Redisç¼“å­˜è¿è¡Œæ­£å¸¸
- [x] APIæœåŠ¡è¿è¡Œæ­£å¸¸
- [x] å‰ç«¯æœåŠ¡è¿è¡Œæ­£å¸¸
- [x] Nginxç½‘å…³è¿è¡Œæ­£å¸¸
- [x] æ‰€æœ‰æœåŠ¡é…ç½®ä¸ºsystemdç®¡ç†
- [x] æ‰€æœ‰æœåŠ¡å¼€æœºè‡ªå¯
- [x] å¥åº·æ£€æŸ¥å…¨éƒ¨é€šè¿‡
- [x] å¤–éƒ¨è®¿é—®æ­£å¸¸
- [x] APIæ–‡æ¡£å¯è®¿é—®
- [x] Neo4jæµè§ˆå™¨å¯è®¿é—®
- [x] æœåŠ¡ç®¡ç†è„šæœ¬éƒ¨ç½²å®Œæˆ
- [x] æ—¥å¿—ç³»ç»Ÿæ­£å¸¸å·¥ä½œ
- [x] ä¸æœ¬åœ°ç¯å¢ƒåŠŸèƒ½ä¸€è‡´

### ğŸŠ æœ€ç»ˆéªŒè¯

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
kg-health

# é¢„æœŸè¾“å‡º
APIæœåŠ¡ (8000): âœ… æ­£å¸¸
å‰ç«¯æœåŠ¡ (5173): âœ… æ­£å¸¸
Neo4j (7474): âœ… æ­£å¸¸
Redis (6379): âœ… æ­£å¸¸
Nginx (80): âœ… æ­£å¸¸
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¿«é€Ÿå‚è€ƒ

- **æœåŠ¡çŠ¶æ€**: `kg-status`
- **å¥åº·æ£€æŸ¥**: `kg-health`
- **æŸ¥çœ‹æ—¥å¿—**: `kg-logs all`
- **é‡å¯æœåŠ¡**: `kg-restart`

### æ–‡æ¡£

- **éƒ¨ç½²å®ŒæˆæŠ¥å‘Š**: `éƒ¨ç½²å®ŒæˆæŠ¥å‘Š.md`
- **æœåŠ¡ç®¡ç†æ–¹æ¡ˆ**: `æœåŠ¡å™¨æœåŠ¡ç®¡ç†æ–¹æ¡ˆ.md`
- **å¿«é€Ÿå‚è€ƒ**: `å¿«é€Ÿå‚è€ƒ.md`

---

## ğŸ¯ æ€»ç»“

### éƒ¨ç½²æˆæœ

âœ… **5ä¸ªæ ¸å¿ƒæœåŠ¡** å…¨éƒ¨éƒ¨ç½²æˆåŠŸå¹¶è¿è¡Œæ­£å¸¸  
âœ… **systemdç®¡ç†** æ‰€æœ‰æœåŠ¡ç»Ÿä¸€ç®¡ç†ï¼Œå¼€æœºè‡ªå¯  
âœ… **å¥åº·ç›‘æ§** å®Œæ•´çš„å¥åº·æ£€æŸ¥å’Œç›‘æ§ä½“ç³»  
âœ… **ä¾¿æ·ç®¡ç†** 5ä¸ªç®¡ç†è„šæœ¬ï¼Œä¸€é”®æ“ä½œ  
âœ… **æ—¥å¿—ç®¡ç†** é›†ä¸­çš„æ—¥å¿—ç³»ç»Ÿï¼Œä¾¿äºæ’æŸ¥  
âœ… **åŠŸèƒ½ä¸€è‡´** ä¸æœ¬åœ°ç¯å¢ƒå®Œå…¨ä¸€è‡´ï¼Œç”šè‡³æ›´ä¼˜  

### ä¸‹ä¸€æ­¥å»ºè®®

1. ğŸ“Š **é…ç½®ç›‘æ§å‘Šè­¦** - æœåŠ¡å¼‚å¸¸æ—¶è‡ªåŠ¨é€šçŸ¥
2. ğŸ“¦ **å®šæ—¶å¤‡ä»½** - Neo4jæ•°æ®å’Œé…ç½®æ–‡ä»¶
3. ğŸ”’ **é…ç½®HTTPS** - ä½¿ç”¨Let's Encryptè¯ä¹¦
4. ğŸ›¡ï¸ **é…ç½®é˜²ç«å¢™** - é™åˆ¶ç«¯å£è®¿é—®
5. ğŸ“ˆ **æ€§èƒ½ä¼˜åŒ–** - æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µè°ƒä¼˜

---

**ğŸ‰ æ­å–œï¼çŸ¥è¯†å›¾è°±ç³»ç»Ÿå·²æˆåŠŸéƒ¨ç½²åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼**

**è®¿é—®åœ°å€**: http://47.108.152.16/  
**éƒ¨ç½²æ—¶é—´**: 2025-10-04 01:48  
**éƒ¨ç½²çŠ¶æ€**: âœ… å®Œå…¨æˆåŠŸ

