<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰ç«¯APIæµ‹è¯•</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
    <h1>å‰ç«¯APIæµ‹è¯•</h1>
    <div id="results"></div>

    <script>
        const baseURL = 'http://localhost:8000';
        
        async function testAPIs() {
            const results = document.getElementById('results');
            
            try {
                // æµ‹è¯•å¥åº·æ£€æŸ¥
                console.log('æµ‹è¯•å¥åº·æ£€æŸ¥...');
                const healthResponse = await axios.get(`${baseURL}/health`);
                results.innerHTML += `<p>âœ… å¥åº·æ£€æŸ¥: ${JSON.stringify(healthResponse.data)}</p>`;
                
                // æµ‹è¯•æ–‡ä»¶åˆ—è¡¨
                console.log('æµ‹è¯•æ–‡ä»¶åˆ—è¡¨...');
                const filesResponse = await axios.get(`${baseURL}/kg/files`);
                results.innerHTML += `<p>âœ… æ–‡ä»¶åˆ—è¡¨: ${JSON.stringify(filesResponse.data)}</p>`;
                
                // æµ‹è¯•å®ä½“è·å–
                console.log('æµ‹è¯•å®ä½“è·å–...');
                const entitiesResponse = await axios.get(`${baseURL}/kg/entities`);
                results.innerHTML += `<p>âœ… å®ä½“è·å–: è·å–åˆ° ${entitiesResponse.data.entities.length} ä¸ªå®ä½“</p>`;
                
                // æµ‹è¯•å›¾è°±æŸ¥è¯¢
                console.log('æµ‹è¯•å›¾è°±æŸ¥è¯¢...');
                const queryResponse = await axios.post(`${baseURL}/kg/query`, {
                    cypher_query: "MATCH (n:Entity) RETURN n.type as entity_type, count(n) as count ORDER BY count DESC"
                });
                results.innerHTML += `<p>âœ… å›¾è°±æŸ¥è¯¢: è¿”å› ${queryResponse.data.results.length} æ¡ç»“æœ</p>`;
                
                // æµ‹è¯•å›¾è°±æ•°æ®
                console.log('æµ‹è¯•å›¾è°±æ•°æ®...');
                const graphResponse = await axios.get(`${baseURL}/kg/graph/data`);
                results.innerHTML += `<p>âœ… å›¾è°±æ•°æ®: ${graphResponse.data.nodes.length} ä¸ªèŠ‚ç‚¹, ${graphResponse.data.edges.length} ä¸ªå…³ç³»</p>`;
                
                // æµ‹è¯•ç»Ÿè®¡ä¿¡æ¯
                console.log('æµ‹è¯•ç»Ÿè®¡ä¿¡æ¯...');
                const statsResponse = await axios.get(`${baseURL}/kg/stats`);
                results.innerHTML += `<p>âœ… ç»Ÿè®¡ä¿¡æ¯: ${JSON.stringify(statsResponse.data)}</p>`;
                
                results.innerHTML += `<p><strong>ğŸ‰ æ‰€æœ‰APIæµ‹è¯•é€šè¿‡ï¼</strong></p>`;
                
            } catch (error) {
                console.error('APIæµ‹è¯•å¤±è´¥:', error);
                results.innerHTML += `<p>âŒ APIæµ‹è¯•å¤±è´¥: ${error.message}</p>`;
            }
        }
        
        // é¡µé¢åŠ è½½åè‡ªåŠ¨æµ‹è¯•
        window.onload = testAPIs;
    </script>
</body>
</html>
