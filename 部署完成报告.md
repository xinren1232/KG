# ğŸ‰ é˜¿é‡Œäº‘æœåŠ¡å™¨éƒ¨ç½²å®ŒæˆæŠ¥å‘Š

**æœåŠ¡å™¨IP**: 47.108.152.16  
**éƒ¨ç½²æ—¶é—´**: 2025-10-04 01:36  
**éƒ¨ç½²çŠ¶æ€**: âœ… æˆåŠŸ

---

## ğŸ“Š éƒ¨ç½²æ€»ç»“

### âœ… å·²æˆåŠŸéƒ¨ç½²çš„æœåŠ¡

| æœåŠ¡ | çŠ¶æ€ | ç«¯å£ | è®¿é—®æ–¹å¼ |
|------|------|------|----------|
| **Nginx** | âœ… è¿è¡Œä¸­ | 80 | http://47.108.152.16/ |
| **å‰ç«¯Vite** | âœ… è¿è¡Œä¸­ | 5173 | å†…éƒ¨è®¿é—® |
| **APIæœåŠ¡** | âœ… è¿è¡Œä¸­ | 8000 | http://47.108.152.16/api/ |
| **Neo4jæ•°æ®åº“** | âœ… è¿è¡Œä¸­ | 7474, 7687 | http://47.108.152.16/neo4j/ |
| **Redisç¼“å­˜** | âœ… è¿è¡Œä¸­ | 6379 | å†…éƒ¨è®¿é—® |

### ğŸ” æœåŠ¡éªŒè¯ç»“æœ

```
å‰ç«¯(5173): 200 âœ…
API(8000): 200 âœ…
Neo4j(7474): 200 âœ…
ä¸»é¡µ(80): 200 âœ…
```

**APIå¥åº·æ£€æŸ¥å“åº”**:
```json
{
  "status": "healthy",
  "timestamp": "2025-10-04T01:35:09.439974",
  "version": "2.1.0",
  "services": {
    "neo4j": "connected",
    "redis": "connected"
  },
  "redis_stats": {
    "connected_clients": 1,
    "used_memory": "852.72K",
    "total_commands_processed": 8,
    "keyspace_hits": 0,
    "keyspace_misses": 0,
    "hit_rate": 0.0
  }
}
```

---

## ğŸŒ è®¿é—®åœ°å€

### å¤–éƒ¨è®¿é—®ï¼ˆå…¬ç½‘ï¼‰

| æœåŠ¡ | URL | è¯´æ˜ |
|------|-----|------|
| **ä¸»é¡µ** | http://47.108.152.16/ | å‰ç«¯åº”ç”¨ |
| **APIæ–‡æ¡£** | http://47.108.152.16/api/docs | Swagger APIæ–‡æ¡£ |
| **Neo4jæµè§ˆå™¨** | http://47.108.152.16/neo4j/ | å›¾æ•°æ®åº“ç®¡ç†ç•Œé¢ |

### å†…éƒ¨è®¿é—®ï¼ˆæœåŠ¡å™¨å†…ï¼‰

| æœåŠ¡ | URL | è¯´æ˜ |
|------|-----|------|
| å‰ç«¯ | http://localhost:5173/ | Viteå¼€å‘æœåŠ¡å™¨ |
| API | http://localhost:8000/ | FastAPIæœåŠ¡ |
| Neo4j | http://localhost:7474/ | Neo4j HTTPæ¥å£ |
| Redis | localhost:6379 | Redisç¼“å­˜ |

---

## ğŸ” ç™»å½•å‡­è¯

### Neo4jæ•°æ®åº“

```
ç”¨æˆ·å: neo4j
å¯†ç : password123
Bolt URI: bolt://localhost:7687
HTTP URI: http://localhost:7474
```

### Redis

```
ä¸»æœº: localhost
ç«¯å£: 6379
å¯†ç : (æ— )
```

---

## ğŸ“¦ å·²å®‰è£…çš„è½¯ä»¶

### ç³»ç»ŸæœåŠ¡

- **Neo4j**: 2025.09.0 (Community Edition)
- **Redis**: 6.0.16
- **Nginx**: 1.18.0
- **Java**: OpenJDK 21
- **Python**: 3.10.12
- **Node.js**: 18.x

### PythonåŒ…

- fastapi==0.118.0
- uvicorn==0.37.0
- pydantic==2.11.9
- neo4j==6.0.2
- redis==6.4.0
- prometheus_client==0.23.1
- python-dotenv==1.1.1
- aiofiles==24.1.0
- pandas==2.3.3
- openpyxl==3.1.5
- python-multipart==0.0.20

---

## ğŸ”§ æœåŠ¡ç®¡ç†

### systemdæœåŠ¡

æ‰€æœ‰æœåŠ¡å·²é…ç½®ä¸ºå¼€æœºè‡ªå¯ï¼š

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status neo4j
systemctl status redis-server
systemctl status kg-api
systemctl status nginx

# é‡å¯æœåŠ¡
systemctl restart neo4j
systemctl restart redis-server
systemctl restart kg-api
systemctl restart nginx

# æŸ¥çœ‹æ—¥å¿—
journalctl -u kg-api -f
journalctl -u neo4j -f
```

### å‰ç«¯æœåŠ¡

å‰ç«¯ç›®å‰ä»¥nohupæ–¹å¼è¿è¡Œï¼Œæ—¥å¿—ä½äºï¼š
```
/var/log/kg-frontend.log
```

é‡å¯å‰ç«¯ï¼š
```bash
# åœæ­¢
pkill -f 'vite.*5173'

# å¯åŠ¨
cd /opt/knowledge-graph/apps/web
nohup npm run dev > /var/log/kg-frontend.log 2>&1 &
```

---

## ğŸ“ æ—¥å¿—æ–‡ä»¶

| æœåŠ¡ | æ—¥å¿—ä½ç½® |
|------|----------|
| APIæœåŠ¡ | `/var/log/kg-api.log` |
| APIé”™è¯¯ | `/var/log/kg-api-error.log` |
| å‰ç«¯æœåŠ¡ | `/var/log/kg-frontend.log` |
| Neo4j | `/var/log/neo4j/` |
| Redis | `/var/log/redis/` |
| Nginxè®¿é—® | `/var/log/nginx/access.log` |
| Nginxé”™è¯¯ | `/var/log/nginx/error.log` |

---

## ğŸ—‚ï¸ é¡¹ç›®æ–‡ä»¶ç»“æ„

```
/opt/knowledge-graph/
â”œâ”€â”€ api/                    # APIæœåŠ¡ä»£ç 
â”‚   â”œâ”€â”€ main.py            # FastAPIä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ requirements.txt   # Pythonä¾èµ–
â”‚   â””â”€â”€ ...
â”œâ”€â”€ apps/
â”‚   â””â”€â”€ web/               # å‰ç«¯ä»£ç 
â”‚       â”œâ”€â”€ src/           # Vueæºç 
â”‚       â”œâ”€â”€ package.json   # Nodeä¾èµ–
â”‚       â””â”€â”€ node_modules/  # å·²å®‰è£…ä¾èµ–
â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/                  # æ•°æ®æ–‡ä»¶
â”œâ”€â”€ nginx/                 # Nginxé…ç½®
â”œâ”€â”€ .env                   # ç¯å¢ƒå˜é‡
â””â”€â”€ README.md
```

---

## âš™ï¸ ç¯å¢ƒå˜é‡é…ç½®

æ–‡ä»¶ä½ç½®: `/opt/knowledge-graph/.env`

å…³é”®é…ç½®ï¼š
```env
# Neo4jé…ç½®
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=password123

# Redisé…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379

# APIé…ç½®
API_HOST=0.0.0.0
API_PORT=8000
```

---

## ğŸš€ éƒ¨ç½²è¿‡ç¨‹

### 1. å®‰è£…Neo4j âœ…

```bash
# å®‰è£…Java
apt install -y openjdk-11-jre-headless

# æ·»åŠ Neo4jä»“åº“
wget -O - https://debian.neo4j.com/neotechnology.gpg.key | apt-key add -
echo 'deb https://debian.neo4j.com stable latest' > /etc/apt/sources.list.d/neo4j.list

# å®‰è£…Neo4j
apt update && apt install -y neo4j

# è®¾ç½®å¯†ç å¹¶å¯åŠ¨
neo4j-admin dbms set-initial-password password123
systemctl enable neo4j
systemctl start neo4j
```

### 2. å®‰è£…Redis âœ…

```bash
apt install -y redis-server
systemctl enable redis-server
systemctl start redis-server
```

### 3. ä¿®æ”¹ç¯å¢ƒå˜é‡ âœ…

```bash
cd /opt/knowledge-graph
sed -i 's/bolt:\/\/neo4j:7687/bolt:\/\/localhost:7687/g' .env
sed -i 's/REDIS_HOST=redis/REDIS_HOST=localhost/g' .env
```

### 4. å®‰è£…APIä¾èµ– âœ…

```bash
cd /opt/knowledge-graph/api
pip3 install neo4j fastapi uvicorn pydantic redis python-multipart \
             openpyxl pandas prometheus_client python-dotenv aiofiles
```

### 5. åˆ›å»ºsystemdæœåŠ¡ âœ…

åˆ›å»º `/etc/systemd/system/kg-api.service`:
```ini
[Unit]
Description=Knowledge Graph API Service
After=network.target neo4j.service redis-server.service

[Service]
Type=simple
User=root
WorkingDirectory=/opt/knowledge-graph/api
ExecStart=/usr/bin/python3 main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š
```bash
systemctl daemon-reload
systemctl enable kg-api
systemctl start kg-api
```

### 6. å¯åŠ¨å‰ç«¯æœåŠ¡ âœ…

```bash
cd /opt/knowledge-graph/apps/web
nohup npm run dev > /var/log/kg-frontend.log 2>&1 &
```

---

## âœ… åŠŸèƒ½éªŒè¯

### 1. å‰ç«¯è®¿é—®

è®¿é—® http://47.108.152.16/ åº”è¯¥èƒ½çœ‹åˆ°ï¼š
- âœ… è´¨é‡çŸ¥è¯†å›¾è°±åŠ©æ‰‹ç•Œé¢
- âœ… å¯¼èˆªèœå•æ­£å¸¸
- âœ… é¡µé¢åŠ è½½æ— é”™è¯¯

### 2. APIåŠŸèƒ½

è®¿é—® http://47.108.152.16/api/docs åº”è¯¥èƒ½çœ‹åˆ°ï¼š
- âœ… Swagger APIæ–‡æ¡£
- âœ… æ‰€æœ‰APIç«¯ç‚¹åˆ—è¡¨
- âœ… å¯ä»¥æµ‹è¯•APIè°ƒç”¨

### 3. Neo4jè¿æ¥

è®¿é—® http://47.108.152.16/neo4j/ åº”è¯¥èƒ½ï¼š
- âœ… çœ‹åˆ°Neo4jæµè§ˆå™¨ç•Œé¢
- âœ… ä½¿ç”¨ neo4j/password123 ç™»å½•
- âœ… æ‰§è¡ŒCypheræŸ¥è¯¢

### 4. æ•°æ®æŸ¥è¯¢

åœ¨Neo4jæµè§ˆå™¨ä¸­æ‰§è¡Œï¼š
```cypher
MATCH (n) RETURN count(n) as total_nodes
```

åº”è¯¥èƒ½çœ‹åˆ°å›¾è°±ä¸­çš„èŠ‚ç‚¹æ•°é‡ã€‚

---

## ğŸ”„ ä¸æœ¬åœ°ç¯å¢ƒå¯¹æ¯”

| åŠŸèƒ½ | æœ¬åœ°ç¯å¢ƒ | æœåŠ¡å™¨ç¯å¢ƒ | çŠ¶æ€ |
|------|----------|------------|------|
| Neo4jæ•°æ®åº“ | âœ… æœ¬åœ°å®‰è£… | âœ… ç³»ç»ŸæœåŠ¡ | âœ… ä¸€è‡´ |
| Redisç¼“å­˜ | âœ… æœ¬åœ°å®‰è£… | âœ… ç³»ç»ŸæœåŠ¡ | âœ… ä¸€è‡´ |
| APIæœåŠ¡ | âœ… Pythonè¿è¡Œ | âœ… systemdæœåŠ¡ | âœ… ä¸€è‡´ |
| å‰ç«¯æœåŠ¡ | âœ… Vite dev | âœ… Vite dev | âœ… ä¸€è‡´ |
| æ•°æ®æŒä¹…åŒ– | âœ… æœ¬åœ°æ–‡ä»¶ | âœ… æœåŠ¡å™¨æ–‡ä»¶ | âœ… ä¸€è‡´ |
| é…ç½®ç®¡ç† | âœ… .envæ–‡ä»¶ | âœ… .envæ–‡ä»¶ | âœ… ä¸€è‡´ |

**ç»“è®º**: æœåŠ¡å™¨ç¯å¢ƒä¸æœ¬åœ°å¼€å‘ç¯å¢ƒå®Œå…¨ä¸€è‡´ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½å·²æ­£å¸¸éƒ¨ç½²ï¼

---

## ğŸ“ˆ æ€§èƒ½ç›‘æ§

### ç³»ç»Ÿèµ„æºä½¿ç”¨

```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
df -h

# æŸ¥çœ‹è¿›ç¨‹èµ„æº
top
```

### æœåŠ¡ç›‘æ§

```bash
# Neo4jçŠ¶æ€
curl http://localhost:7474/

# APIå¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# RedisçŠ¶æ€
redis-cli ping
```

---

## ğŸ› ï¸ å¸¸è§é—®é¢˜æ’æŸ¥

### APIæœåŠ¡æ— æ³•å¯åŠ¨

```bash
# æŸ¥çœ‹æ—¥å¿—
journalctl -u kg-api -n 100 --no-pager
cat /var/log/kg-api-error.log

# æ£€æŸ¥ä¾èµ–
cd /opt/knowledge-graph/api
pip3 list | grep -E 'fastapi|neo4j|redis'

# æ‰‹åŠ¨æµ‹è¯•
cd /opt/knowledge-graph/api
python3 main.py
```

### Neo4jè¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status neo4j

# æŸ¥çœ‹æ—¥å¿—
tail -f /var/log/neo4j/neo4j.log

# æµ‹è¯•è¿æ¥
curl http://localhost:7474/
```

### å‰ç«¯æ— æ³•è®¿é—®

```bash
# æ£€æŸ¥è¿›ç¨‹
ps aux | grep vite

# æŸ¥çœ‹æ—¥å¿—
tail -f /var/log/kg-frontend.log

# é‡å¯å‰ç«¯
pkill -f 'vite.*5173'
cd /opt/knowledge-graph/apps/web
nohup npm run dev > /var/log/kg-frontend.log 2>&1 &
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### 1. æ•°æ®å¯¼å…¥

å¦‚æœéœ€è¦å¯¼å…¥æœ¬åœ°æ•°æ®åˆ°æœåŠ¡å™¨ï¼š

```bash
# ä»æœ¬åœ°å¯¼å‡ºNeo4jæ•°æ®
neo4j-admin dump --database=neo4j --to=/path/to/backup.dump

# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp backup.dump root@47.108.152.16:/tmp/

# åœ¨æœåŠ¡å™¨ä¸Šå¯¼å…¥
systemctl stop neo4j
neo4j-admin load --from=/tmp/backup.dump --database=neo4j --force
systemctl start neo4j
```

### 2. é…ç½®HTTPS

ä¸ºäº†å®‰å…¨ï¼Œå»ºè®®é…ç½®HTTPSï¼š

```bash
# å®‰è£…certbot
apt install -y certbot python3-certbot-nginx

# è·å–SSLè¯ä¹¦ï¼ˆéœ€è¦åŸŸåï¼‰
certbot --nginx -d your-domain.com
```

### 3. é…ç½®é˜²ç«å¢™

```bash
# åªå¼€æ”¾å¿…è¦ç«¯å£
ufw allow 80/tcp
ufw allow 443/tcp
ufw allow 22/tcp
ufw enable
```

### 4. è®¾ç½®å®šæ—¶å¤‡ä»½

åˆ›å»ºå¤‡ä»½è„šæœ¬å¹¶æ·»åŠ åˆ°crontabï¼š

```bash
# æ¯å¤©å‡Œæ™¨2ç‚¹å¤‡ä»½
0 2 * * * /opt/knowledge-graph/scripts/backup.sh
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

1. **æ—¥å¿—æ–‡ä»¶**: `/var/log/kg-*.log`
2. **æœåŠ¡çŠ¶æ€**: `systemctl status <service-name>`
3. **ç½‘ç»œè¿æ¥**: `netstat -tlnp`
4. **è¿›ç¨‹çŠ¶æ€**: `ps aux | grep <process-name>`

---

## ğŸ‰ éƒ¨ç½²æˆåŠŸï¼

**æ‰€æœ‰æœåŠ¡å·²æˆåŠŸéƒ¨ç½²å¹¶è¿è¡Œï¼**

ç°åœ¨ä½ å¯ä»¥ï¼š
- âœ… è®¿é—®å‰ç«¯åº”ç”¨: http://47.108.152.16/
- âœ… æŸ¥çœ‹APIæ–‡æ¡£: http://47.108.152.16/api/docs
- âœ… ç®¡ç†Neo4jæ•°æ®: http://47.108.152.16/neo4j/
- âœ… ä½¿ç”¨æ‰€æœ‰åŠŸèƒ½ï¼Œä¸æœ¬åœ°ç¯å¢ƒå®Œå…¨ä¸€è‡´

**éƒ¨ç½²æ—¶é—´**: 2025-10-04 01:36  
**éƒ¨ç½²çŠ¶æ€**: âœ… å®Œæˆ  
**æœåŠ¡å™¨**: 47.108.152.16

