@echo off
chcp 65001 >nul
echo ================================================================================
echo ğŸ” å¿«é€Ÿæ£€æŸ¥é˜¿é‡Œäº‘æœåŠ¡å™¨éƒ¨ç½²çŠ¶æ€
echo ================================================================================
echo.

set SERVER=root@47.108.152.16

echo 1ï¸âƒ£  æ£€æŸ¥è¿è¡Œçš„è¿›ç¨‹...
echo ================================================================================
ssh %SERVER% "ps aux | grep -E 'python|node|neo4j|redis|nginx|java' | grep -v grep"
echo.

echo 2ï¸âƒ£  æ£€æŸ¥ç›‘å¬çš„ç«¯å£...
echo ================================================================================
ssh %SERVER% "netstat -tlnp | grep -E '80|443|5173|8000|7474|7687|6379|3000|9090'"
echo.

echo 3ï¸âƒ£  æ£€æŸ¥é¡¹ç›®ç›®å½•...
echo ================================================================================
ssh %SERVER% "ls -la /opt/knowledge-graph/ 2>/dev/null || echo 'ç›®å½•ä¸å­˜åœ¨'"
echo.

echo 4ï¸âƒ£  æ£€æŸ¥Nginxé…ç½®...
echo ================================================================================
ssh %SERVER% "cat /etc/nginx/sites-available/knowledge-graph 2>/dev/null || echo 'é…ç½®ä¸å­˜åœ¨'"
echo.

echo 5ï¸âƒ£  æ£€æŸ¥ç³»ç»ŸæœåŠ¡çŠ¶æ€...
echo ================================================================================
ssh %SERVER% "systemctl status nginx | head -10"
echo.

echo 6ï¸âƒ£  æµ‹è¯•HTTPç«¯ç‚¹...
echo ================================================================================
echo æµ‹è¯•ä¸»é¡µ...
ssh %SERVER% "curl -s -o /dev/null -w 'HTTPçŠ¶æ€ç : %%{http_code}\n' http://localhost/"
echo.
echo æµ‹è¯•å‰ç«¯(5173)...
ssh %SERVER% "curl -s -o /dev/null -w 'HTTPçŠ¶æ€ç : %%{http_code}\n' http://localhost:5173/"
echo.
echo æµ‹è¯•API(8000)...
ssh %SERVER% "curl -s -o /dev/null -w 'HTTPçŠ¶æ€ç : %%{http_code}\n' http://localhost:8000/health"
echo.

echo ================================================================================
echo âœ… æ£€æŸ¥å®Œæˆ
echo ================================================================================
pause

